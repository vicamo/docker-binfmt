language: bash
dist: xenial
sudo: required
services: docker

env:
  matrix:
  - DIST=debian SUITE=buster
  - DIST=debian SUITE=jessie
  - DIST=debian SUITE=sid
  - DIST=debian SUITE=stretch
  - DIST=ubuntu SUITE=bionic
  - DIST=ubuntu SUITE=cosmic
  - DIST=ubuntu SUITE=disco
  - DIST=ubuntu SUITE=trusty
  - DIST=ubuntu SUITE=xenial

branches:
  only:
  - master

script:
  - docker build -t vicamo/binfmt-qemu:$SUITE $DIST/$SUITE
  - ls -al /proc/sys/fs/binfmt_misc
  - docker run --rm --privileged vicamo/binfmt-qemu:$SUITE
  - sudo update-binfmts --display

after_script:
  - docker images

# vim:set et ts=2 sw=2:
